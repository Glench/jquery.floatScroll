(function(e){e.floatScroll={defaults:{positionTop:0,placeholderClass:"scrollPlaceholder",zIndex:1e5,onFloat:function(e){},onUnFloat:function(e){},bounds:function(t){return e([])}}},e.fn.floatScroll=function(t){var n=e.extend({},e.floatScroll.defaults,t||{}),r=function(e,t){var n;return e.css("position")=="absolute"?n=t.left:e.css("left")=="auto"?n=t.left:parseInt(e.css("left"))?n=e.css("left"):n=t.left,n};return this.each(function(){var t=e(this),i=e(window),s={position:t.css("position"),top:t.css("top"),right:t.css("right"),left:t.css("left"),width:t.css("width"),zIndex:t.css("z-index"),marginTop:t.css("margin-top"),marginLeft:t.css("margin-left"),"float":t.css("float")},o=t.offset(),u=0,a=n.bounds(t);i.scroll(function(){var f=i.scrollTop(),l=a&&a.length&&a.outerHeight()+a.offset().top+n.positionTop-t.outerHeight();if(o.top-n.positionTop>f)t.data(n.placeholderClass)&&(t.data(n.placeholderClass).remove(),t.data(n.placeholderClass,null)),t.css(s),n.onUnFloat(t);else if(l&&l<f)t.css("top",l-f);else if(l&&t.data(n.placeholderClass)&&l>f)t.css("top",n.positionTop);else if(!t.data(n.placeholderClass)){var c=e("<div>",{"class":n.placeholderClass,width:t.outerWidth(!0),height:t.outerHeight(!0),css:{"float":s["float"],position:s.position,top:s.top,right:s.right,left:s.left}});t.after(c),t.data(n.placeholderClass,c),u=r(t,o),t.css({position:"fixed",top:n.positionTop,left:u,width:t.css("width"),marginTop:0,marginLeft:0,zIndex:n.zIndex}),n.onFloat(t)}t.data(n.placeholderClass)&&t.css("left",u-i.scrollLeft())})})}})(jQuery)